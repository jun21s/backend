<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Pagination</title>
</head>

<body>
    <h1>Post Pagination</h1>
    <form action="/api/project/postsboard" method="post" enctype="application/x-www-form-urlencoded"></form>
    <div id="postList">
        <!-- Posts will be displayed here -->
    </div>
    <div id="pagination">
        <!-- Pagination links will be displayed here -->
    </div>
    <a href="/createProject">게시물 생성</a>

    <script>
        const postList = document.getElementById('postList');
        const pagination = document.getElementById('pagination');

        function fetchPosts(page) {
            fetch(`/api/project/postsboard?page=${page}`, { method: 'POST' }) // Use correct API endpoint

                .then(response => response.json())
                .then(data => {
                    // Display posts
                    postList.innerHTML = '';
                    data.posts.forEach(post => {
                        const postElement = document.createElement('div');
                        postElement.textContent = post.title; // Assuming you have a title field in your posts
                        postList.appendChild(postElement);
                    });

                    // Display pagination links
                    pagination.innerHTML = '';
                    for (let i = 1; i <= data.totalPages; i++) {
                        const link = document.createElement('a');
                        link.textContent = i;
                        link.href = '#';
                        link.addEventListener('click', function (event) {
                            event.preventDefault();
                            fetchPosts(i);
                        });
                        pagination.appendChild(link);
                    }
                })
                .catch(error => {
                    console.error('Error fetching posts:', error);
                });
        }

        // Fetch initial page data and pagination links
        fetchPosts(1);
    </script>
</body>

</html>